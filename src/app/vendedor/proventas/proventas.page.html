<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button fill="outline" [routerDirection]="'back'" [routerLink]="'/vendedor-page'">Volver</ion-button>
    </ion-buttons>
    <ion-title>Publicar Productos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div>
    <ion-card>
      <ion-row>
        <ion-col>
          <ion-list>
            <form id="addProductForm" (ngSubmit)="agregarProducto()" #productForm="ngForm">
              <ion-item>
                <!-- Imagen -->
                <ion-thumbnail slot="start">
                  <ion-item>
                    <ion-label>Foto del Producto</ion-label>
                    <ion-button (click)="tomarFotop()">Tomar Foto</ion-button>
                  </ion-item>
                  <img *ngIf="pImagen" [src]="pImagen" alt="Foto del Producto" />
                </ion-thumbnail>
            
                <ion-label>
                  <ion-input type="file" accept="image/*" (change)="onImageSelected($event)" name="imagen" required></ion-input>
                  <div *ngIf="productForm.controls.imagen?.invalid && (productForm.controls.imagen?.dirty || productForm.controls.imagen?.touched)" class="error-message">
                    La imagen es obligatoria.
                  </div>
            
                  <ion-input formControlName="titulo" type="text" placeholder="Ingresa Titulo" labelPlacement="floating" required minlength="3"></ion-input>
                  <div *ngIf="productForm.controls.titulo?.invalid && (productForm.controls.titulo?.dirty || productForm.controls.titulo?.touched)" class="error-message">
                    El título es obligatorio y debe tener al menos 3 caracteres.
                  </div>
            
                  <ion-input formControlName="valor" type="number" placeholder="Ingresa Valor" labelPlacement="floating" required min="0"></ion-input>
                  <div *ngIf="productForm.controls.valor?.invalid && (productForm.controls.valor?.dirty || productForm.controls.valor?.touched)" class="error-message">
                    El valor es obligatorio y debe ser un número positivo.
                  </div>
            
                  <ion-input formControlName="descripcion" type="text" placeholder="Ingresa Descripcion" labelPlacement="floating" required minlength="10"></ion-input>
                  <div *ngIf="productForm.controls.descripcion?.invalid && (productForm.controls.descripcion?.dirty || productForm.controls.descripcion?.touched)" class="error-message">
                    La descripción es obligatoria y debe tener al menos 10 caracteres.
                  </div>
            
                  <ion-input formControlName="stock" type="number" placeholder="Ingresa Stock" labelPlacement="floating" required min="0" max="99"></ion-input>
                  <div *ngIf="productForm.controls.stock?.invalid && (productForm.controls.stock?.dirty || productForm.controls.stock?.touched)" class="error-message">
                    El stock es obligatorio y debe estar entre 0 y 99.
                  </div>
                </ion-label>
            
                <div class="button-container">
                  <ion-button fill="solid" color="success" type="submit" [disabled]="productForm.invalid">
                    <ion-icon name="add-outline"></ion-icon> Agregar Producto
                  </ion-button>
                </div>
              </ion-item>
            </form>

            <ion-item>
              <ion-thumbnail slot="start">
                <img src="../assets/icon/favicon.png" />
              </ion-thumbnail>
              <ion-label>
                <strong><b>Producto 1</b></strong><br>
                <ion-button style="float: right; padding: 0px; margin: 0px;" fill="solid" color="danger" slot="end">
                  <ion-icon name="trash"></ion-icon>
                </ion-button>
                <strong><b>Valor:</b> $12.00</strong>
                <p><b>Descripción:</b> Descripción del producto 1</p>
                <ion-button style="float: left; padding: 0px; margin: 0px;" fill="outline"> - </ion-button>
                <h5 style="display: inline"><ion-button style="float: left; padding: 0px; margin: 0px;"
                    fill="clear"><b>Stock: 5 </b></ion-button></h5>
                <ion-button style="float: left; padding: 0px; margin: 0px;" fill="outline"> + </ion-button>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-thumbnail slot="start">
                <img src="../assets/icon/favicon.png" />
              </ion-thumbnail>
              <ion-label>
                <strong><b>Producto 2</b></strong><br>
                <ion-button style="float: right; padding: 0px; margin: 0px;" fill="solid" color="danger" slot="end">
                  <ion-icon name="trash"></ion-icon>
                </ion-button>
                <strong><b>Valor:</b> $15.00</strong>
                <p><b>Descripción:</b> Descripción del producto 2</p>
                <ion-button style="float: left; padding: 0px; margin: 0px;" fill="outline"> - </ion-button>
                <h5 style="display: inline"><ion-button style="float: left; padding: 0px; margin: 0px;"
                    fill="clear"><b>Stock: 1 </b></ion-button></h5>
                <ion-button style="float: left; padding: 0px; margin: 0px;" fill="outline"> + </ion-button>
              </ion-label>
            </ion-item>

            <ion-item>
              <ion-thumbnail slot="start">
                <img src="../assets/icon/favicon.png" />
              </ion-thumbnail>
              <ion-label>
                <strong><b>Producto 3</b></strong><br>
                <ion-button style="float: right; padding: 0px; margin: 0px;" fill="solid" color="danger" slot="end">
                  <ion-icon name="trash"></ion-icon>
                </ion-button>
                <strong><b>Valor:</b> $35.00</strong>
                <p><b>Descripción:</b> Descripción del producto 3</p>
                <ion-button style="float: left; padding: 0px; margin: 0px;" fill="outline"> - </ion-button>
                <h5 style="display: inline"><ion-button style="float: left; padding: 0px; margin: 0px;"
                    fill="clear"><b>Stock: 3 </b></ion-button></h5>
                <ion-button style="float: left; padding: 0px; margin: 0px;" fill="outline"> + </ion-button>
              </ion-label>
            </ion-item>

            <ion-button type="button" fill="solid" expand="full" (click)="onSubmit()">
              Publicar Nuevos Productos
            </ion-button>
          </ion-list>
        </ion-col>
      </ion-row>
    </ion-card>
  </div>
</ion-content>